---
import type { NavigationLinkItem } from '@/components/navigation'
import { allWallets } from '@/data/wallets'
import { hardwareWallets } from '@/data/hardware-wallets'
import LuKey from 'lucide-static/icons/key.svg?raw'
import LuWallet from 'lucide-static/icons/wallet.svg?raw'

interface Props {
	navigationItems: NavigationLinkItem[]
}

const { navigationItems } = Astro.props
---

<nav>
	<header>
		<a href="/">
			<img src="/logo-light.svg" alt="WalletBeat Logo" data-theme="light" />
			<img src="/logo-dark.svg" alt="WalletBeat Logo" data-theme="dark" />
		</a>
	</header>

	<div>
		<section>
			<h3>Home</h3>
			<ul>
				<li><a href="/#summary">Summary</a></li>
			</ul>
		</section>

		<details open>
			<summary>
				<span set:html={LuWallet} />
				Wallets
			</summary>
			<ul>
				{
					Object.entries(allWallets).map(([key, wallet]) => (
						<li>
							<a href={`/${key}`}>
								<img
									src={`/images/wallets/${wallet.metadata.id}.${wallet.metadata.iconExtension}`}
									alt=""
								/>
								{wallet.metadata.displayName}
							</a>
						</li>
					))
				}
			</ul>
		</details>

		<details open>
			<summary>
				<span set:html={LuKey} />
				Hardware Wallets
			</summary>
			<ul>
				{
					Object.entries(hardwareWallets).map(([key, wallet]) => {
						let displayName = wallet.metadata.displayName
						if (key === 'ledger') displayName = 'Ledger'
						if (key === 'trezor') displayName = 'Trezor'
						if (key === 'gridplus') displayName = 'Grid Plus'
						if (key === 'keystone') displayName = 'Keystone'

						return (
							<li>
								<a href={`/${key}`}>
									<img
										src={`/images/wallets/${wallet.metadata.id}.${wallet.metadata.iconExtension}`}
										alt=""
									/>
									{displayName}
								</a>
							</li>
						)
					})
				}
			</ul>
		</details>

		<details open>
			<summary>About</summary>
			<ul>
				{
					navigationItems.map(item => (
						<li>
							<a 
								href={item.href}
								{...(item.href.startsWith('http') ? { target: '_blank', rel: 'noreferrer' } : {})}
							>
								<span set:html={item.icon} />
								{item.title}
							</a>
						</li>
					))
				}
			</ul>
		</details>
	</div>

	<footer>
		<p>
			Wallets listed on this page are not official endorsements, and are provided for
			informational purposes only.
		</p>
	</footer>
</nav>

<style>
	nav {
		width: 20rem;
		background: var(--navigation-bg);
		border-right: 1px solid var(--border-color);
		display: flex;
		flex-direction: column;
		overflow-y: auto;

		@media (max-width: 1024px) {
			width: 100%;
			height: auto;
		}

		header {
			padding: 2rem 1.5rem 1rem;
			border-bottom: 1px solid var(--border-color);

			a {
				display: flex;
				align-items: center;
				text-decoration: none;

				img {
					height: 2rem;
					width: auto;
				}

				img[data-theme='light'] {
					display: block;
				}

				img[data-theme='dark'] {
					display: none;
				}

				:global(.dark) & {
					img[data-theme='light'] {
						display: none;
					}

					img[data-theme='dark'] {
						display: block;
					}
				}
			}
		}

		> div {
			flex: 1;
			padding: 1rem;

			section {
				margin-bottom: 1.5rem;

				h3 {
					display: flex;
					align-items: center;
					gap: 0.5rem;
					font-size: 0.875rem;
					font-weight: 600;
					color: var(--text-secondary);
					text-transform: uppercase;
					letter-spacing: 0.05em;
					margin: 0 0 0.5rem 0;
					padding: 0.5rem 0;

					span {
						width: 1rem;
						height: 1rem;
						display: flex;
						align-items: center;
						justify-content: center;

						:global(svg) {
							width: 100%;
							height: 100%;
						}
					}
				}
			}

			details {
				margin-bottom: 1.5rem;

				summary {
					display: flex;
					align-items: center;
					gap: 0.5rem;
					font-size: 0.875rem;
					font-weight: 600;
					color: var(--text-secondary);
					text-transform: uppercase;
					letter-spacing: 0.05em;
					margin: 0 0 0.5rem 0;
					padding: 0.5rem 0;
					cursor: pointer;
					user-select: none;

					span {
						width: 1rem;
						height: 1rem;
						display: flex;
						align-items: center;
						justify-content: center;

						:global(svg) {
							width: 100%;
							height: 100%;
						}
					}
				}
			}

			ul {
				list-style: none;
				margin: 0;
				padding: 0;

				li {
					margin-bottom: 0.25rem;

					a {
						display: flex;
						align-items: center;
						gap: 0.5rem;
						padding: 0.5rem 0.75rem;
						border-radius: 0.375rem;
						color: var(--text-primary);
						text-decoration: none;
						transition: background-color 0.2s ease;

						&:hover {
							background-color: var(--background-secondary);
						}

						img {
							width: 1rem;
							height: 1rem;
							border-radius: 0.125rem;
						}

						span {
							width: 1rem;
							height: 1rem;
							display: flex;
							align-items: center;
							justify-content: center;

							:global(svg) {
								width: 100%;
								height: 100%;
							}
						}
					}
				}
			}
		}

		footer {
			padding: 1rem;
			margin-top: auto;
			background: var(--accent-very-light);
			border-radius: 0.5rem;
			margin: 1rem;

			p {
				font-size: 0.875rem;
				color: var(--text-secondary);
				margin: 0;
				line-height: 1.4;
			}
		}
	}
</style> 